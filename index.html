<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="description">
    <title></title>
    <meta name="viewport" content="width=device-width">
    <meta name="format-detection" content="telephone=no">
    <meta property="og:title" content="title">
    <meta property="og:site_name" content="site_name">
    <meta property="og:description" content="description">
    <meta property="og:type" content="website">
    <meta property="og:image" content="">
    <style type="text/css">
    html,body {
      margin: 0;
      padding: 0;
    }
    .picture {
      border: 1px solid #000;
      width: 100px;
      height: 100px;
      margin-bottom: 10px;
    }
    .picture img {
      width: 100px;
      height: 100px;
    }
    </style>
    <script type="text/javascript" src="utils.js"></script>
    <script type="text/javascript">
      window.onload = function() {
        var picture = document.getElementsByClassName(".wrapper")[0];
        var pictureImg = document.getElementsByTagName("img");
        var windowHeight = document.documentElement.clientHeight || document.body.clientHeight;
        function lazyLoad(curImage) {
          var flag = false;
          if(!flag) {
            var windowScroll = document.documentElement.scrollTop || document.body.scrollTop;
            if(windowHeight >= utils.offset(curImage).top - windowScroll + curImage.offsetHeight) {
              var temp = document.createElement("img");
              temp.src = curImage.dataset["src"];
              temp.onload = function() {
                curImage.src = temp.src;
                temp = null;
              }
              flag = true;
            }
          }
        }

        for(var i = 0; i < pictureImg.length; i++) {
          lazyLoad(pictureImg[i]);
        }

        window.onscroll = function() {
          for(var i = 0; i < pictureImg.length; i++) {
            lazyLoad(pictureImg[i]);
          }
        }
      }
    </script>
  </head>
  <body>
    <div class="wrapper">
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
        <div class="picture"><img src="//via.placeholder.com/200x200" data-src="normal.jpg"></div>
    </div>
  </body>
</html>